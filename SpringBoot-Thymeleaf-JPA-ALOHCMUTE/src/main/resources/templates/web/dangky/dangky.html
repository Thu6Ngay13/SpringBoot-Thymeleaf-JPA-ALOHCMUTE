<html xmlns:th "http://www.thymeleaf.org" xmlns:layout="http://ww.ultraq.net.nz/thymeleaf/layout">

<head>
	<meta charset="utf-8">
	<title> Trang Đăng Ký</title>
	<link rel="stylesheet" th:href="@{/css/style_dangky.css}">
	<link rel="stylesheet" th:href="@{https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css}">
</head>

<body>
	<div class="wrapper">
		<div class="title">
			Tạo tài khoản mới
			<p>Nhanh chóng và đơn giản</p>
		</div>
		<form method="post" th:action="@{/register/save}" th:object="${user}">
			<div class="field">
				<input type="text" name="username" required th:field="*{username}">
				<label for="">Tài khoản</label>
			</div>
			<p id="nospace-username" style="color: red; display: none;">Không được nhập dấu cách vào đây.</p>

			<div class="field">
				<input type="text" required th:field="*{firstName}">
				<label for="">Họ và tên đệm</label>
			</div>
			
			<div class="field">
				<input type="text" required th:field="*{lastName}">
				<label for="">Tên</label>
			</div>

			<div class="field_gener">
				<label class="field-label"> Giới tính </label>
				<div class="radio-group">
					<input type="radio" id="Nam" th:value="Nam" th:field="*{sex}">
					<label for="Nam">Nam</label>
					<input type="radio" id="Nư" th:value="Nữ" th:field="*{sex}">
					<label for="Nu">Nữ</label>
					<input type="radio" id="Khac" th:value="Khác" th:field="*{sex}">
					<label for="Khac">Khác</label>
				</div>
			</div>

			<div class="field">
				<input type="text" name="email" required th:field="*{email}">
				<label for="">Email</label>
			</div>
			<p id="nospace-email" style="color: red; display: none;">Không được nhập dấu cách vào đây.</p>
			<div class="field">
				<input type="number" name="phone" required th:field="*{phone}">
				<label for="">SDT</label>
			</div>
			<p id="nospace-phone" style="color: red; display: none;">Không được nhập dấu cách vào đây.</p>
			<div class="field">
                <input type="password" id="password" name="password" required>
                <label for="password">Mật khẩu</label>
            </div>
			<p id="nospace-password" style="color: red; display: none;">Không được nhập dấu cách vào đây.</p>
            <div class="field">
                <input type="password" id="confirmPassword" name="confirmPassword" required th:field="*{password}">
                <label for="confirmPassword">Xác nhận mật khẩu</label>
            </div>
            
            <p id="passwordMatchError" style="color: red; display: none;">Mật khẩu không khớp.</p>
			<div class="field">
				<input type="submit" id="registerBtn" value="Tạo tại khoản" disabled>
			</div>

			<div class="signup-link">
				Bạn đã có tài khoản? <a th:href="@{/login}"> Đăng nhập ngay</a>
			</div>
		</form>

	</div>
	<script th:src="@{js/script_thongbao.js}"></script>
	<script th:src="@{https://code.jquery.com/jquery-3.6.0.js}"></script>
	<script>
		$(document).ready(function () {
			var passwordInput = $("#password");
			var confirmPasswordInput = $("#confirmPassword");
			var passwordMatchError = $("#passwordMatchError");
			var registerBtn = $("#registerBtn");
	
			confirmPasswordInput.on("blur", function () {
				var password = passwordInput.val();
				var confirmPassword = confirmPasswordInput.val();
	
				if (password !== confirmPassword) {
					passwordMatchError.show();
					registerBtn.prop("disabled", true);
				} else {
					passwordMatchError.hide();
					registerBtn.prop("disabled", false);
				}
			});
		});
	</script>
	<script>
		$(document).ready(function() {
			  var usernameInput = document.querySelector('input[name="username"]');
	            var emailInput = document.querySelector('input[name="email"]');
	            var passwordInput = document.querySelector('input[name="password"]');
	            var phoneInput = document.querySelector('input[name="phone"]');
	
	            // Add event listeners to the input fields to prevent spaces
	            usernameInput.addEventListener('input', function () {
	                nospace-username.show();
	            });
	
	            emailInput.addEventListener('input', function () {
	                nospace-email.show();
	            });
	
	            passwordInput.addEventListener('input', function () {
	                nospace-password.show();
	            });
	
	            phoneInput.addEventListener('input', function () {
	                nospace-phone.show();
			  	});
			  $('input').on('input', function() {
	            if ($(this).val().indexOf(' ') !== -1) {
	                toastr.error('Không được nhập dấu cách.');
	            }
        		});
			});
	</script>
</body>
<script>document.getElementById("Nam").setAttribute("checked", "checked")</script>
<script th:src="@{https://code.jquery.com/jquery-3.6.0.js}"></script>
<script th:src="@{https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js}"></script>
<script th:if="${not #strings.isEmpty(mess)}">
	$(document).ready(function () {
		toastr.options = {
			"closeButton": true,
			"progressBar": true,
			"positionClass": "toast-top-right",
			"showDuration": "300",
			"hideDuration": "1000",
			"timeOut": "5000",
			"extendedTimeOut": "1000",
			"showEasing": "swing",
			"hideEasing": "linear",
			"showMethod": "fadeIn",
			"hideMethod": "fadeOut"
		};
		toastr["[[${typenotify}]]"]("[[${mess}]]");
	});
	
</script>

</html>